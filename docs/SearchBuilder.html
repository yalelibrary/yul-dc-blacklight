<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: SearchBuilder
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "SearchBuilder";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">SearchBuilder</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: SearchBuilder
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Blacklight::SearchBuilder</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Blacklight::SearchBuilder</li>
          
            <li class="next">SearchBuilder</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Blacklight::Solr::SearchBuilderBehavior, BlacklightRangeLimit::RangeLimitBuilder</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/search_builder.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Build the search query that is passed to solr. This is where we can configure the search “processor chain”, i.e., anything that should be appended to the search. For Yale, we are limiting searches to only records that are marked Public or Yale Community Only.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_solr_parameters'>solr_parameters</span><span class='lbracket'>[</span><span class='symbol'>:fq</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>((visibility_ssi:Public) OR (visibility_ssi:&quot;Yale Community Only&quot;))</span><span class='tstring_end'>&#39;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Adding a new step to the processor chain</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_default_processor_chain'>default_processor_chain</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='symbol'>:add_custom_data_to_query</span><span class='rbracket'>]</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_custom_data_to_query'>add_custom_data_to_query</span><span class='lparen'>(</span><span class='id identifier rubyid_solr_parameters'>solr_parameters</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solr_parameters'>solr_parameters</span><span class='lbracket'>[</span><span class='symbol'>:custom</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_blacklight_params'>blacklight_params</span><span class='lbracket'>[</span><span class='symbol'>:user_value</span><span class='rbracket'>]</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#show_only_public_records-instance_method" title="#show_only_public_records (instance method)">#<strong>show_only_public_records</strong>(solr_parameters)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Use the solr fq (filter query) parameter to limit search results to only those items explicitly marked Public or Yale Community Only.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="show_only_public_records-instance_method">
  
    #<strong>show_only_public_records</strong>(solr_parameters)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Use the solr fq (filter query) parameter to limit search results to only those items explicitly marked Public or Yale Community Only. This should ensure that only records explicitly cleared for display are ever shown.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>solr_parameters</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a hash of parameters to be sent to Solr (via RSolr)</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/search_builder.rb', line 26</span>

<span class='kw'>def</span> <span class='id identifier rubyid_show_only_public_records'>show_only_public_records</span><span class='lparen'>(</span><span class='id identifier rubyid_solr_parameters'>solr_parameters</span><span class='rparen'>)</span>
  <span class='comment'># add a new solr facet query (&#39;fq&#39;) parameter that limits results to those with a &#39;public_b&#39; field of 1
</span>  <span class='id identifier rubyid_solr_parameters'>solr_parameters</span><span class='lbracket'>[</span><span class='symbol'>:fq</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_solr_parameters'>solr_parameters</span><span class='lbracket'>[</span><span class='symbol'>:fq</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>((visibility_ssi:Public) OR (visibility_ssi:&quot;Yale Community Only&quot;))</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Jun 17 19:07:57 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.6.6).
</div>

    </div>
  </body>
</html>